using Bunit;
using NUnit.Framework;
using Misbah.BlazorDesktop.Pages.Notes;

[TestFixture]
public class TrueLiveMarkdownEditorEditabilityTests : Bunit.TestContext
{
    [Test]
    public void Editor_RendersTextarea_WhenContentIsNotEmpty()
    {
        // Arrange
        var content = "Hello world";
        var cut = RenderComponent<TrueLiveMarkdownEditor>(parameters => parameters
            .Add(p => p.Content, content)
        );

        // Act
        var textarea = cut.FindAll("textarea");

        // Assert
        Assert.That(textarea, Is.Not.Empty);
    }

    [Test]
    public void Editor_RendersTextarea_WhenContentIsEmpty()
    {
        // Arrange
        var cut = RenderComponent<TrueLiveMarkdownEditor>(parameters => parameters
            .Add(p => p.Content, "")
        );

        // Act
        var textarea = cut.FindAll("textarea");

        // Assert
        Assert.That(textarea, Is.Not.Empty);
    }

    [Test]
    public void Editor_UpdatesContent_OnUserInput()
    {
        // Arrange
        var cut = RenderComponent<TrueLiveMarkdownEditor>(parameters => parameters
            .Add(p => p.Content, "Hello world")
        );
        var textarea = cut.Find("textarea");

        // Act
        textarea.Change("Updated content");

        // Assert
        Assert.That(textarea.GetAttribute("value", Is.EqualTo("Updated content")));
    }
}
